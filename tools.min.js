var _=function(){"use strict";var t={build:function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e]);return t},serialize:function(t){var n="";for(var e in t)t[e]="object"==typeof t[e]?JSON.stringify(t[e]):t[e],t[e]=encodeURI(t[e]),n+=e+"="+t[e]+"&";return n.slice(0,n.length-1)}},n=function(e){var r={};r.sel=function(){if("string"==typeof e){var t=document.querySelectorAll(e);return Array.prototype.slice.call(t)}if(e instanceof HTMLElement)return[e];if(Array.isArray(e))return e;if(e==window)return[window];throw"Error. This is not a proper selector type."}(),r.loop=function(t){for(var n=0;n<r.sel.length;n++)t(r.sel[n],n)},r.first=function(){return r.sel[0]};var i={addClass:function(t){var n=this;if(/ /.test(t))t.split(/ /g).forEach(function(t){n.addClass(t)});else{var e=r.first().className.split(/ /);-1===e.indexOf(t)&&e.push(t),r.first().className=e.join(" ")}return this},append:function(t){if(t instanceof HTMLElement)r.first().appendChild(t);else{if(!Array.isArray(t))throw"Error. This is not a proper HTML Node type.";t.forEach(function(t){r.first().appendChild(t)})}return this},attr:function(t,n){return"undefined"==typeof n||null===n?r.first().getAttribute(t):(r.loop(function(e){e.setAttribute(t,n)}),this)},before:function(t){var n=r.first().parentNode;return console.log(n,t,r.first()),n.insertBefore(t,r.first()),this},children:function(t){var e=n(t),i=[];return e.forEach(function(t){for(var n=t;t;)if(n=n.parentNode,n.isSameNode(r.first())){i.push(t);break}}),n(i)},click:function(t){return"function"==typeof t?this.on("click",t):r.first().click(),this},clone:function(){return r.first().cloneNode(!0)},css:function(t,n){if("object"==typeof t)r.loop(function(n,e){for(var r in t)t.hasOwnProperty(r)&&(n.style[r]=t[r])});else if(typeof t==typeof n)r.loop(function(e,r){e.style[t]=n});else if("string"==typeof t)return console.log(r.first()),r.first().style[t];return this},data:function(t,n){return"undefined"==typeof n?r.first().dataset[t]:(r.first().dataset[t]=n,this)},dblclick:function(){var t=new MouseEvent("dblclick",{view:window,bubbles:!0,cancelable:!0});r.first().dispatchEvent(t)},each:function(t){return r.loop(function(n,e){t.call(n,e)}),this},el:function(t){if("function"==typeof t){var e=r.sel.filter(function(n,e){return t.call(n,n,e)});return n(e)}if("number"==typeof t){if(r.sel[t])return n(r.sel[t]);throw"This element index does not exist."}throw"Error. Please use a callback function or select and index."},focus:function(){return r.first().focus(),this},form:function(){r.first().children("input, select, textarea").each(function(){console.log(this)})},hasClass:function(t){var n=r.first().className.split(/ /g);return-1!==n.indexOf(t)},height:function(t){return"undefined"==typeof t||null===t?r.first().clientHeight:(r.first().style.height=t,this)},html:function(t,n){return"string"!=typeof t?r.first().innerHTML:(r.loop(function(e){"function"==typeof t?e.innerHTML=n?e.innerHTML+t():t():"string"==typeof t&&(e.innerHTML=n?e.innerHTML+t:t)}),this)},on:function(t,n){return t=t.split(/ /g),r.loop(function(e){t.forEach(function(t){e.addEventListener(t,function(t){n.call(this,t)})})}),this},parent:function(){return n(r.first().parentNode)},prepend:function(t){var n=r.first().firstChild;r.first().insertBefore(t,n)},remove:function(){var t=r.first();return t.parentNode.removeChild(t),r.sel.shift(),n(r.sel)},removeClass:function(t){var n=this;if(/ /.test(t))t.split(/ /).forEach(function(t){n.removeClass(t)});else{var e=r.first().className.split(/ /),i=e.indexOf(t);i>-1&&e.splice(i,1),r.first().className=e.join(" ")}return this},text:function(t,n){return"undefined"==typeof html||null===html||0===html.length?r.first().innerText:(r.loop(function(t){t.innerText=n?t.innerText+html:t.innerText}),this)},toggleClass:function(t){return this.hasClass(t)?this.removeClass(t):this.addClass(t),this},val:function(t){return"string"!=typeof t?r.first().value:(r.loop(function(n){n.value=t}),this)},width:function(t){return"undefined"==typeof t||null===t?r.first().clientWidth:(r.first().style.width=t,this)}},o=r.sel;return t.build(o,i),o},e={assign:function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),e=1;e<arguments.length;e++){var r=arguments[e];if(void 0!==r&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])}return n},ajax:function(n){var e=new XMLHttpRequest,r=t.serialize(n.data);"get"==n.type.toLowerCase()&&r&&(n.url+="?"+r),e.open(n.type,n.url,!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.send(r),e.onreadystatechange=function(){if(4==e.readyState&&200==e.status){var t,r;try{r=n.dataType&&"json"===n.dataType.toLowerCase()?JSON.parse(e.response):e.response}catch(i){t=i}n.callback(r,t)}}},jsonp:function(t,n){var e="callback_"+parseInt(1e10*Math.random(),10);window[e]=function(t){n(t),setTimeout(function(){delete window[e]},10)};var r=document.createElement("script");r.src=/\?/.test(t)?t+"&callback="+e:t+"?callback="+e,document.body.appendChild(r)},isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),create:function(t){t||(t={});var n=document.createElement(t.tagName||"div");for(var e in t)t.hasOwnProperty(e)&&(/innerHTML|className/.test(e)?"function"==typeof t[e]?n[e]=t[e]():"string"==typeof t[e]&&(n[e]=t[e]):"tagName"!==e&&n.setAttribute(e,t[e]));for(e in t.style)t.style.hasOwnProperty(e)&&(n.style[e]=t.style[e]);return n},filterEmpty:function(t){return t.filter(function(t){return t})},get:function(t,n){this.ajax({type:"GET",url:t,callback:n})},loop:function(t,n){for(var e=0;e<t.length;e++)n(t[e],e,t)},stackOverflowError:function(t){var n="http://www.stackoverflow.com/search?q=[js]+"+t.message;window.open(n,"_blank")},map:function(t,n){for(var e=[],r=0;r<t.length;r++)e[r]=n(t[r],r,t);return e},mapReduce:function(t,n){for(var e=[],r=0;r<t.length;r++)e[r]=n(t[r],e[r-1]?e[r-1]:1,r);return e},quote:function(t,n){Array.isArray(t)&&(t=t.join(","));var e="http://query.yahooapis.com/v1/public/yql?q=select * from yahoo.finance.quotes where symbol in ('"+t+"')&env=http%3A%2F%2Fdatatables.org%2Falltables.env&format=json";this.get(e,function(t,e){try{t=JSON.parse(t).query.results.quote}catch(r){throw"This ticker is invalid."}n(t)})},news:function(t,n,e){this.ajax({type:"POST",url:"../personal/tools/tools/deps/google_news.php",data:{query:t,start:n},callback:function(t){e(t.responseData)},dataType:"json"})},newsList:function(t,n,e){function r(o){_.news(t,o,function(t){i=i.concat(t.results),n-4>o?r(o+4):e(i)})}var i=[];return r(0)},moment:function(t){var n=["January","February","March","April","May","June","July","August","September","October","November","December"],e=t?new Date(t):new Date;return{d:e.getDate(),m:e.getMonth(),month:n[e.getMonth()],y:e.getFullYear(),h:e.getHours(),mm:e.getMinutes(),s:e.getSeconds(),ms:e.getMilliseconds(),fmt:{d:("0"+e.getDate()).slice(-2),m:("0"+(e.getMonth()+1)).slice(-2),y:("0"+e.getFullYear()).slice(-4),h:("0"+e.getHours()).slice(-2),mm:("0"+e.getMinutes()).slice(-2),s:("0"+e.getSeconds()).slice(-2),ms:("000"+e.getMilliseconds()).slice(-3)}}},finance:{assetReturn:function(t,n,e){return Math.pow(n/t,1/e)-1},futureValue:function(t,n,e){var r=Math.pow(n+1,e);return t*r},mortgagePayment:function(t,n,e){return n/=12,e*=12,t*n/(1-Math.pow(1+n,-e))},sharpeRatio:function(t,n,e){return(t-n)/e},capm:function(t,n,e){return t+n*(e-t)},expectedValue:function(t,n){var e=0;if(t.length!==n.length)throw"Error. Arrays should be the same length.";return t.forEach(function(t,r){e+=t*n[r]}),e}},quant:{sum:function(t){return t.reduce(function(t,n){return t+n})},mean:function(t){return this.sum(t)/t.length},variance:function(t,n){var e=this.mean(t),r=t.map(function(t){return Math.pow(t-e,2)});return this.sum(r)/(t.length-!!n)},last:function(t){return t[t.length-1]},standardDeviation:function(t,n){var e=this.variance(t,n);return Math.sqrt(e)},kurtosis:function(t){var n=1/t.length,e=this.mean(t),r=this.sum(t.map(function(t){return Math.pow(t-e,4)})),i=Math.pow(this.standardDeviation(t),4);return n*(r/i)},skewness:function(t){var n=t.length,e=this.mean(t),r=this.sum(t.map(function(t){return Math.pow(t-e,3)})),i=(n-1)*Math.pow(this.standardDeviation(t,!0),3);return r/i},volatilityFromPrice:function(t){var n=this.residuals(t).slice(1),e=this.variance(n,!0);return Math.sqrt(e)*Math.sqrt(251)},skewnessFromPrice:function(t){var n=this.residuals(t).slice(1),e=this.skewness(n);return e},kurtosisFromPrice:function(t){var n=this.residuals(t).slice(1),e=this.kurtosis(n);return e},movingSample:function(t,n,e){for(var r=t.slice(0,n),i=[],o=n;o<t.length;o++)i[o]=e.call(this,r,t[o]),r.shift(),r.push(t[o]);return i},productSample:function(t,n){for(var e=[],r=1;r<t.length;r++)e[r]=n(t[r],t[r-1]);return e},bollingerBands:function(t,n,e){return this.movingSample(t,n,function(t,n){var r=this.standardDeviation(this.residuals(t).filter(function(t){return"number"==typeof t}),!0)*(e||1)+1,i=this.mean(t);return{high:i*r,current:n,low:i*(1/r)}})},simpleMovingAverage:function(t,n){return this.movingSample(t,n,function(t){return this.mean(t)})},RSI:function(t){var n=0,e=this.residuals(t).filter(function(t){return"number"==typeof t});return e.forEach(function(t){t>=1&&n++}),n/t.length},rollingVolatility:function(t,n){return this.movingSample(t,n,function(t){return 15.84*this.standardDeviation(t,!0)})},rollingSkewness:function(t,n){return this.movingSample(t,n,function(t){return this.skewness(t)})},rollingKurtosis:function(t,n){return this.movingSample(t,n,function(t){return this.kurtosis(t)})},residuals:function(t){return this.productSample(t,function(t,n){return t/n})},summaryStatistics:function(t){return t=t.sort(function(t,n){return n>t?-1:t>n?1:0}),{min:t[0],max:this.last(t),mean:this.sum(t)/t.length,q1:t[Math.floor(.25*t.length)],q3:t[Math.ceil(.75*t.length)]}},gaussian:function(){var t,n,e;do t=2*Math.random()-1,n=2*Math.random()-1,e=t*t+n*n;while(e>=1||0===e);return Math.sqrt(-2*Math.log(e)/e)*t},normalDist:function(t,n){return t+this.gaussian()*n}}};return t.build(n,e),n}();